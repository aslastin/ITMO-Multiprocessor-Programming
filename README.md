# ITMO-Multiprocessor-Programming-y2021

## Preface

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ª–∏—á–Ω–æ –¥–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –∫—É—Ä—Å–∞ __–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ__.

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –æ—Ç—Ä–∞–∂–µ–Ω–∏—è —É—á–µ–±–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ 3 –∫—É—Ä—Å–µ. –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –¥–µ–π—Å—Ç–≤–∏—è –ª—é–¥–µ–π, —Ä–µ—à–∏–≤—à–∏—Ö –∑–∞ —á—É–∂–æ–π —Å—á–µ—Ç —Å–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–≤ –∫–æ–¥ –∏–∑ –¥–∞–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

–ö–æ–¥, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –º–Ω–æ–π, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–∞—Ö `src`. 

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ—à–µ–Ω–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –¥–∞–Ω–Ω–æ–≥–æ –∫—É—Ä—Å–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `test`.

–ö –∫–∞–∂–¥–æ–º—É –∑–∞–¥–∞–Ω–∏—é –µ—Å—Ç—å –∏ –æ–ø–∏—Å–∞–Ω–∏–µ, –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç–æ–≤ (—Å–º. `README.md`).

–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è –≤ –º–∏—Ä –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è!


## Tasks

1. [Stack with Elimination](stack-elimination): –ø–æ—Ç–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π lock-free —Å—Ç–µ–∫ - –µ—Å—Ç—å –ª–∏ –ø–æ–¥–≤–æ—Ö–∏? –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –¥–∞ - –µ—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å –Ω–∞–∏–≤–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ `CAS`-—ã, —Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º –±—É–¥–µ—Ç –ø–ª–æ—Ö–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º. –ê —á—Ç–æ –µ—Å–ª–∏ –ø–æ—Ç–æ–∫–∏, –ø—Ä–µ–∂–¥–µ —á–µ–º –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ `head`, –±—É–¥—É—Ç –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è –Ω–∞ –Ω–µ–∫–æ–π –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏? –¢—É—Ç –∫ –Ω–∞–º –Ω–∞ –ø–æ–º–æ—â—å –∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Ç–µ—Ö–Ω–∏–∫–∞ _elimination array_.

1. [Michael-Scott Queue](msqueue): –Ω–∞–ø–∏—Å–∞—Ç—å –ø–æ—Ç–æ–±–µ–∑–æ–ø–∞—Å–Ω—É—é lock-free –æ—á–µ—Ä–µ–¥—å –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ, –≤–µ–¥—å –ø–æ—Ç–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –¥–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≤ –∫–æ–Ω–µ—Ü –æ—á–µ—Ä–µ–¥–∏, –º–æ–≥—É—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –¥—Ä—É–≥ –¥—Ä—É–≥—É –º–µ—à–∞—Ç—å. –î–∞–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∑–Ω–∞–∫–æ–º–∏—Ç –Ω–∞—Å —Å –∏–¥–µ–π _–≤–∑–∞–∏–º–æ–ø–æ–º–æ—â–∏_, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏—Å—É—â–∞ –º–Ω–æ–≥–∏–º lock-free –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º: –ø—Ä–µ–∂–¥–µ–º —á–µ–º –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç —Å–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ, –ø—É—Å—Ç—å –ø–µ—Ä–µ–¥ —ç—Ç–∏–º –æ–Ω _–ø–æ–º–æ–∂–µ—Ç –¥—Ä—É–≥–æ–º—É –ø–æ—Ç–æ–∫—É_ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ –∑–∞–¥–∞–Ω–∏—è.

1. [Possible Executions Analysis](possible-executions-analysis): –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏—è - –¥–∞–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∑–∞–∫—Ä–µ–ø–ª—è–µ—Ç –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç –Ω–∞–≤—ã–∫.

1. [Fine Grained Bank](fine-grained-bank): –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–Ω–∫–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞–º–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ª–æ–∫–∞. –û–¥–Ω–∞–∫–æ, —Å—Ç–æ–∏—Ç –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ –¥–µ–¥–ª–æ–∫, —Å –∫–æ—Ç–æ—Ä—ã–º –ø–æ–º–æ–≥—É—Ç —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –¥–≤—É—Ö—Ñ–∞–∑–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

1. [Lamport Lock Fail](lamport-lock-fail): –∞–ª–≥–æ—Ä–∏—Ç–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –õ–∞–º–ø–æ—Ä—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–æ–º —Å–∞–º–æ–π —á–µ—Å—Ç–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ - _First Come First Served_.

1. [Parallel Dijkstra with Multi-Queue](dijkstra): —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—É—é –≤–µ—Ä—Å–∏—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –î–µ–π–∫—Å—Ç—Ä—ã –Ω–∞–º –ø–æ–º–æ–∂–µ—Ç _Relaxed Data Structure_ - _Multi-Queue_.

1. [Lock-Free Set via Linked Lists](inked-list-set): lock-free set —Å  –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ `add`, `remove`, `contains` –∑–∞ `O(n)`.

1. [Skip List](skip-list) üí•: –º–æ–∂–Ω–æ –ª–∏ —Å–¥–µ–ª–∞—Ç—å lock-free set, –≥–¥–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–º–µ—é—Ç –∞—Å–∏–º–ø—Ç–æ—Ç–∏–∫—É `O(logn)`? –ò–º–µ–Ω–Ω–æ –¥–ª—è —Ç–∞–∫–∏—Ö —Ü–µ–ª–µ–π –∏ —Å–ª—É–∂–∏—Ç _Skip List_.

1. [Monotonic Clock](monotonic-clock): –∫–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —á–∞—Å—ã –≤ –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ? –ß–∞—Å—ã –õ–∞–º–ø–æ—Ä—Ç–∞ –∏–¥—É—Ç –≤ –ø–æ–º–æ—â—å.

1. [Universal Construction](universal-construction): –º–æ–∂–Ω–æ –ª–∏ –ª—é–±–æ–π –æ–±—ä–µ–∫—Ç —Å–¥–µ–ª–∞—Ç—å lock-free? –î–∞ - _—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è_.

1. [Dynamic Array](dynamic-array): –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π lock-free –º–∞—Å—Å–∏–≤ - —ç—Ç–æ —Å—é–¥–∞.

1. [Hash Table](hash-table) üí•: lock-free —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞ —Å –∞—Å–∏–º–ø—Ç–æ—Ç–∏–∫–æ–π `O(1)`? –°–¥–µ–ª–∞—Ç—å –º–æ–∂–Ω–æ, –Ω–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ)

1. [FAA-Based Queue](faa-queue): –æ—á–µ—Ä–µ–¥—å –ú–∞–π–∫–ª–∞-–°–∫–æ—Ç—Ç–∞ –Ω–µ —Å–∞–º–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–Ω–∞—è - –º–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—ã—Ç–∞—é—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å `CAS` –Ω–∞–¥ –æ–¥–Ω–æ–π —è—á–µ–π–∫–æ–π. –û—á–µ—Ä–µ–¥–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–º–µ—Å—Ç–æ `CAS` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `Fetch-And-Add` –±—É–¥—É—Ç –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ, –∏ –Ω–µ –º–µ–Ω–µ–µ –ø—Ä–æ—Å—Ç—ã –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

1. [Flat-Combining Priority Queue](fc-priority-queue): —Ö–æ—Ç–∏–º –ø–∏—Å–∞—Ç—å —Ç–∞–∫–æ–π –∂–µ –ø—Ä–æ—Å—Ç–æ–π –∫–æ–¥, –∫–∞–∫ —Å –≥—Ä—É–±–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π, –Ω–æ –±—ã—Ç—å —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –±—ã—Å—Ç—Ä–µ–µ - –¥–∞–µ—à—å _Flat Combining_.

1. [MCS Lock](mcs-lock): —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–≥–æ —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç–µ–π –ª–æ–∫–æ–≤. __CLH Lock__ –∏–º–µ–µ—Ç –º–Ω–æ–≥–æ –ø–ª—é—Å–æ–≤, –Ω–æ –∑–∞–º–µ—Ç–Ω–æ –ø–ª–æ—Ö –¥–ª—è _NUMA_-—Å–∏—Å—Ç–µ–º. __MCS Lock__ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É.

1. [Lock-Free Bank](lock-free-bank): —Å–∏–º–±–∏–æ–∑ —Ç–æ–Ω–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –∏–¥–µ–∏ –≤–∑–∞–∏–º–æ–ø–æ—â–∏ –¥–ª—è lock-free –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ - –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π –±–∞–Ω–∫ –º—ã –∑–∞—Å–ª—É–∂–∏–ª–∏!

1. [CASN](casn) üí•: `CAS` —Ö–æ—Ç—å –∏ —è–≤–ª—è–µ—Ç—Å—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≥–∏–±–æ–∫. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –±—ã —É –Ω–∞—Å –±—ã–ª–∞ —Ç–∞–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –∫–∞–∫ `CAS2`, –º—ã –º–æ–≥–ª–∏ –±—ã —Å–¥–µ–ª–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–≥–æ lock-free —Å—Ç–µ–∫–∞ –Ω–∞ –º–∞—Å—Å–∏–≤–µ, –∞—Ç–æ–º–∞—Ä–Ω–æ –º–µ–Ω—è—è —Ä–∞–∑–º–µ—Ä –∏ –≤–µ—Ä—Ö—É—à–∫—É —Å—Ç–µ–∫–∞.

1. [STM Bank](stm-bank): –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π - –ø–æ—Ç–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏. –¢–∞–∫–∂–µ –æ–Ω–∞ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è lock-free –±–∞–Ω–∫–∞ —Ç–µ–ø–µ—Ä—å —Å—Ç–∞–Ω–µ—Ç –Ω–∞–ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ—â–µ.
